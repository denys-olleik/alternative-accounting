@model Accounting.Models.HomeViewModels.LatestPostViewModel

@{
  ViewData["Title"] = ConfigurationSingleton.Instance.ApplicationName;
}

<script src="~/js/vue-3-5-13.js" asp-append-version="true"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/go.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/csharp.min.js"></script>
<script>hljs.highlightAll();</script>

@if (!User.Identity.IsAuthenticated)
{
  <div class="display-flex max-width-768-flex-direction-column">
    <div class="flex-1 display-flex flex-direction-column margin-bottom-5px">
      <img class="width-100 margin-bottom-5px" src="~/images/cat.png" />
      <div class="padding-5px flex-1 color-white background-color-black font-Roboto-Mono">
        <div class="text-align-center">
          –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –°–∏—Å—Ç–µ–º–∞ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (–£–°–ê) —Å –∂—É—Ä–Ω–∞–ª–æ–º (debit/credit) –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
        </div>
      </div>
    </div>
    <div class="width-5px"></div>
    <div class="flex-1 display-flex flex-direction-column margin-bottom-5px">
      <div id="app" class="width-100"></div>
      <div class="display-flex flex-direction-column flex-1 background-color-black">
        <div class="flex-1"></div>
        <div class="text-align-center color-white font-Roboto-Mono">–ü—É—Å—Ç—å —É–ø–∏–≤–∞—é—Ç—Å—è –∫–∞–ø–∏—Ç–∞–ª–∏—Å—Ç—ã —Å–≤–æ–∏–º–∏ –∫–∞–ø–∏—Ç–∞–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.<br /><br />–ú—ã –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—é –¥–æ—Å—Ç—É–ø–Ω—É—é –¥–ª—è –≤—Å–µ—Ö.<br /><br />–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è? –ö–∞–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è! –†–µ–±—ë–Ω–∫—É –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.<br /><br />–ó–∞—Å—Ç–∞–≤–ª—è—é—Ç –Ω–∞—Å –∂–∏—Ç—å –∫–∞–∫ –ø–∞—É–∫–æ–≤ –≤ –±–∞–Ω–∫–µ.<br /><br />–ù–µ—Ç, –≥–æ—Å–ø–æ–∂–∞ ursula von der leyen, –Ω–∞—Å  –∑–∞ –≥–æ–ª—É—é –∂–æ–ø—É –Ω–µ –≤–æ–∑—å–º—ë—à—å.<span class="blinking-cursor color-lawngreen">‚ñà</span></div>
        <div class="flex-1"></div>
      </div>
    </div>
  </div>
}

@if (!User.Identity.IsAuthenticated)
{
  <div class="display-flex margin-bottom-5px">
    <div class="flex-1 background-color-A62626 text-align-center">
      <a href="https://github.com/denys-olleik/alternative-accounting" class="font-Oswald color-white font-size-40px">source</a>
    </div>
    <div class="width-5px"></div>
    <div class="flex-1 background-color-A62626 text-align-center">
      <a asp-action="Register" asp-controller="Registration" class="font-Oswald color-white font-size-40px">demo</a>
    </div>
  </div>
  <div class="background-color-antiquewhite padding-10px font-Roboto-Mono margin-bottom-5px">
    <h2>Getting started</h2>

    <ul>
      <li>Clone this repository</li>
      <li>Have PostgreSQL installed</li>
      <li>
        Update
        <code>appsettings.json</code>.<code>DatabasePassword</code>
      </li>
      <li>
        Set
        <code>database-reset.json</code>.<code>Reset</code> to
        <code>true</code>
      </li>
      <li>Run the application</li>
    </ul>

    <h2>Model any financial operation</h2>

    <h3>Example 1: Invoice create, updated, and void</h3>

    <table class="border-collapse width-100 margin-bottom-5px background-color-antiquewhite">
      <thead class="border-bottom-1px-solid-1a3b56 font-Roboto">
        <tr>
          <th class="text-align-left">test</th>
        </tr>
      </thead>
      <tbody class="font-Roboto-Mono">

      </tbody>
    </table>

    <ul>
      <li>Create invoice</li>
      <li>Receive payment</li>
      <li>Record foreign currency transaction</li>
      <li>Issue or assign equity (e.g., owner‚Äôs capital, shares issued)</li>
      <li>Purchase inventory</li>
      <li>Move inventory between locations</li>
      <li>Record expense payment (e.g., rent, utilities)</li>
      <li>Record payroll</li>
      <li>Record depreciation of assets</li>
      <li>Reconciliations</li>
      <li>...</li>
    </ul>

    <h2>Core concepts</h2>

    <ul>
      <li>Journal</li>
      <li>Accounts</li>
      <li>Transaction</li>
      <li>Double-entry</li>
      <li>Forward-only</li>
    </ul>

    <h2>Transaction</h2>
    <p>When double-entry accounting was invented over 700 years ago, people didn't know what they were doing. How could they? They didn't have computers, language models, or toilets.</p>
    <br />
    <p>Accounting systems have become the automatic transmission of an organization; a lifetime snake-oil warranty; a paper tiger.</p>
  </div>
}

@if (User.Identity.IsAuthenticated)
{
  <div class="background-color-antiquewhite">
    <ul class="margin-0">
      <li>
        <a href="@Url.Action("Journal", "Journal")">Journal üüß</a>
      </li>
      <li>
        <a href="@Url.Action("Update", "Organization")">Organization üü©</a>
      </li>
      <li>
        <a href="@Url.Action("Users", "User")">Users üü© </a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "User")">Create user üü© </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("Tasks", "Task")">Project management üüß</a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "Task")">Create task üüß</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("Invoices", "Invoice")">Invoices üü© </a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "Invoice")">Create invoice üü© </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("Customers", "Customer")">Customers and vendors üü© </a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "Customer")">Create customer and or vendor üü© </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("PaymentTerms", "PaymentTerm")">Payment terms üü© </a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "PaymentTerm")">Create payment term üü© </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("Taxes", "Tax")">Taxes üüß</a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "Tax")">Create tax üüß</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("Items", "Item")">Items üü®</a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "Item")">Create item üüß</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("Locations", "Location")">Locations üüß</a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "Location")">Create location üü©</a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("Reconciliations", "ReconciliationRev")">Reconciliations üü©</a>
      </li>
      <li>
        <a href="@Url.Action("Accounts", "Account")">Accounts üü© </a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "Account")">Create account üü© </a>
          </li>
        </ul>
      </li>
      @* <li>
        <a href="@Url.Action("ShippingAndReceiving", "ShippingAndReceiving")">Shipping and receiving</a>
      </li> *@
      <li>
        <a href="@Url.Action("Blogs", "Blog")">Blog üü© </a>
        <ul>
          <li>
            <a href="@Url.Action("Create", "Blog")">Create post üü© </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("Tenants", "Tenant")">Tenants üü© </a>
        <ul>
          <li>
            <a href="@Url.Action("Secrets", "Secret")">Secrets üü© </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="@Url.Action("UpdatePassword", "User")">Update password üü©</a>
      </li>
      <li>
        <a href="@Url.Action("RequestLogs", "Diagnostics")">Request logs üü©</a>
      </li>
      <li>
        <a href="@Url.Action("Exceptions", "Diagnostics")">Exceptions üü©</a>
      </li>
    </ul>
  </div>
}

@if (User.Identity.IsAuthenticated)
{
  <div class="display-flex background-color-white">
    <div class="flex-1">
      <canvas id="accountBalanceChart" width="400" height="400"></canvas>
    </div>
    <div class="width-5px">
    </div>
    <div class="flex-1">
    </div>
  </div>
}

@if (User.Identity.IsAuthenticated)
{
  <script>
    (async () => {
      try {
        const response = await fetch(`${window.location.protocol}//${window.location.hostname}:${window.location.port ? window.location.port : ''}/api/r/get-account-balance-report`);
        const apiData = await response.json();

        const accountNumbers = apiData.map(item => item.name);
        const currentBalances = apiData.map(item => item.currentBalance);

        const ctx = document.getElementById('accountBalanceChart').getContext('2d');
        const myChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: accountNumbers,
            datasets: [{
              label: 'Current Balance',
              data: currentBalances,
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1
            }]
          }
        });
      } catch (error) {

      }
    })();
  </script>
}

<script>
  function updateTruncate3() {
    document.querySelectorAll('.truncate-3').forEach(el => {
      const full = el.dataset.full || el.textContent.trim();
      el.dataset.full = full;
      el.textContent = window.innerWidth < 768 ? full.slice(0,3) + '‚Ä¶' : full;
    });
  }
  window.addEventListener('resize', updateTruncate3);
  window.addEventListener('DOMContentLoaded', updateTruncate3);
</script>